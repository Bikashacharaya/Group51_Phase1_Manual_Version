{"ast":null,"code":"// src/api.js\n\n// Base URL for backend\n// - Uses environment variable for production\n// - Defaults to '/v1' in development (with proxy)\nconst BASE = \"http://localhost:18080/v1\";\n\n/**\r\n * Get JWT token from localStorage\r\n */\nfunction getToken() {\n  return localStorage.getItem(\"token\");\n}\n\n/**\r\n * Build request headers\r\n * @param {boolean} json - true if Content-Type should be application/json\r\n */\nfunction headers(json = true) {\n  const h = {};\n  if (json) h[\"Content-Type\"] = \"application/json\";\n  const token = getToken();\n  if (token) {\n    h[\"Authorization\"] = `Bearer ${token}`;\n  }\n  console.log(\"[API] Headers:\", h); // debug token and headers\n  return h;\n}\n\n/**\r\n * Parse fetch response\r\n */\nasync function parseResponse(res) {\n  const text = await res.text();\n  const data = text ? JSON.parse(text) : {};\n  if (!res.ok) throw {\n    status: res.status,\n    data\n  };\n  return data;\n}\n\n/**\r\n * GET request\r\n */\nexport async function apiGet(path) {\n  const res = await fetch(BASE + path, {\n    method: \"GET\",\n    headers: headers(false) // GET usually doesn't need Content-Type\n  });\n  return parseResponse(res);\n}\n\n/**\r\n * POST request\r\n */\nexport async function apiPost(path, body) {\n  const res = await fetch(BASE + path, {\n    method: \"POST\",\n    headers: headers(true),\n    body: JSON.stringify(body)\n  });\n  return parseResponse(res);\n}\n\n/**\r\n * PUT request\r\n */\nexport async function apiPut(path, body) {\n  const res = await fetch(BASE + path, {\n    method: \"PUT\",\n    headers: headers(true),\n    body: JSON.stringify(body)\n  });\n  return parseResponse(res);\n}\n\n/**\r\n * DELETE request\r\n */\nexport async function apiDelete(path) {\n  const res = await fetch(BASE + path, {\n    method: \"DELETE\",\n    headers: headers(false)\n  });\n  return parseResponse(res);\n}","map":{"version":3,"names":["BASE","getToken","localStorage","getItem","headers","json","h","token","console","log","parseResponse","res","text","data","JSON","parse","ok","status","apiGet","path","fetch","method","apiPost","body","stringify","apiPut","apiDelete"],"sources":["C:/BITS/FSD/equipment-lending_front_app/lending-app/src/api.js"],"sourcesContent":["// src/api.js\r\n\r\n// Base URL for backend\r\n// - Uses environment variable for production\r\n// - Defaults to '/v1' in development (with proxy)\r\nconst BASE = \"http://localhost:18080/v1\";\r\n\r\n/**\r\n * Get JWT token from localStorage\r\n */\r\nfunction getToken() {\r\n  return localStorage.getItem(\"token\");\r\n}\r\n\r\n/**\r\n * Build request headers\r\n * @param {boolean} json - true if Content-Type should be application/json\r\n */\r\nfunction headers(json = true) {\r\n  const h = {};\r\n  if (json) h[\"Content-Type\"] = \"application/json\";\r\n\r\n  const token = getToken();\r\n  if (token) {\r\n    h[\"Authorization\"] = `Bearer ${token}`;\r\n  }\r\n  console.log(\"[API] Headers:\", h); // debug token and headers\r\n  return h;\r\n}\r\n\r\n/**\r\n * Parse fetch response\r\n */\r\nasync function parseResponse(res) {\r\n  const text = await res.text();\r\n  const data = text ? JSON.parse(text) : {};\r\n  if (!res.ok) throw { status: res.status, data };\r\n  return data;\r\n}\r\n\r\n/**\r\n * GET request\r\n */\r\nexport async function apiGet(path) {\r\n  const res = await fetch(BASE + path, {\r\n    method: \"GET\",\r\n    headers: headers(false), // GET usually doesn't need Content-Type\r\n  });\r\n  return parseResponse(res);\r\n}\r\n\r\n/**\r\n * POST request\r\n */\r\nexport async function apiPost(path, body) {\r\n  const res = await fetch(BASE + path, {\r\n    method: \"POST\",\r\n    headers: headers(true),\r\n    body: JSON.stringify(body),\r\n  });\r\n  return parseResponse(res);\r\n}\r\n\r\n/**\r\n * PUT request\r\n */\r\nexport async function apiPut(path, body) {\r\n  const res = await fetch(BASE + path, {\r\n    method: \"PUT\",\r\n    headers: headers(true),\r\n    body: JSON.stringify(body),\r\n  });\r\n  return parseResponse(res);\r\n}\r\n\r\n/**\r\n * DELETE request\r\n */\r\nexport async function apiDelete(path) {\r\n  const res = await fetch(BASE + path, {\r\n    method: \"DELETE\",\r\n    headers: headers(false),\r\n  });\r\n  return parseResponse(res);\r\n}\r\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA,MAAMA,IAAI,GAAG,2BAA2B;;AAExC;AACA;AACA;AACA,SAASC,QAAQA,CAAA,EAAG;EAClB,OAAOC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;AACtC;;AAEA;AACA;AACA;AACA;AACA,SAASC,OAAOA,CAACC,IAAI,GAAG,IAAI,EAAE;EAC5B,MAAMC,CAAC,GAAG,CAAC,CAAC;EACZ,IAAID,IAAI,EAAEC,CAAC,CAAC,cAAc,CAAC,GAAG,kBAAkB;EAEhD,MAAMC,KAAK,GAAGN,QAAQ,CAAC,CAAC;EACxB,IAAIM,KAAK,EAAE;IACTD,CAAC,CAAC,eAAe,CAAC,GAAG,UAAUC,KAAK,EAAE;EACxC;EACAC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEH,CAAC,CAAC,CAAC,CAAC;EAClC,OAAOA,CAAC;AACV;;AAEA;AACA;AACA;AACA,eAAeI,aAAaA,CAACC,GAAG,EAAE;EAChC,MAAMC,IAAI,GAAG,MAAMD,GAAG,CAACC,IAAI,CAAC,CAAC;EAC7B,MAAMC,IAAI,GAAGD,IAAI,GAAGE,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC,GAAG,CAAC,CAAC;EACzC,IAAI,CAACD,GAAG,CAACK,EAAE,EAAE,MAAM;IAAEC,MAAM,EAAEN,GAAG,CAACM,MAAM;IAAEJ;EAAK,CAAC;EAC/C,OAAOA,IAAI;AACb;;AAEA;AACA;AACA;AACA,OAAO,eAAeK,MAAMA,CAACC,IAAI,EAAE;EACjC,MAAMR,GAAG,GAAG,MAAMS,KAAK,CAACpB,IAAI,GAAGmB,IAAI,EAAE;IACnCE,MAAM,EAAE,KAAK;IACbjB,OAAO,EAAEA,OAAO,CAAC,KAAK,CAAC,CAAE;EAC3B,CAAC,CAAC;EACF,OAAOM,aAAa,CAACC,GAAG,CAAC;AAC3B;;AAEA;AACA;AACA;AACA,OAAO,eAAeW,OAAOA,CAACH,IAAI,EAAEI,IAAI,EAAE;EACxC,MAAMZ,GAAG,GAAG,MAAMS,KAAK,CAACpB,IAAI,GAAGmB,IAAI,EAAE;IACnCE,MAAM,EAAE,MAAM;IACdjB,OAAO,EAAEA,OAAO,CAAC,IAAI,CAAC;IACtBmB,IAAI,EAAET,IAAI,CAACU,SAAS,CAACD,IAAI;EAC3B,CAAC,CAAC;EACF,OAAOb,aAAa,CAACC,GAAG,CAAC;AAC3B;;AAEA;AACA;AACA;AACA,OAAO,eAAec,MAAMA,CAACN,IAAI,EAAEI,IAAI,EAAE;EACvC,MAAMZ,GAAG,GAAG,MAAMS,KAAK,CAACpB,IAAI,GAAGmB,IAAI,EAAE;IACnCE,MAAM,EAAE,KAAK;IACbjB,OAAO,EAAEA,OAAO,CAAC,IAAI,CAAC;IACtBmB,IAAI,EAAET,IAAI,CAACU,SAAS,CAACD,IAAI;EAC3B,CAAC,CAAC;EACF,OAAOb,aAAa,CAACC,GAAG,CAAC;AAC3B;;AAEA;AACA;AACA;AACA,OAAO,eAAee,SAASA,CAACP,IAAI,EAAE;EACpC,MAAMR,GAAG,GAAG,MAAMS,KAAK,CAACpB,IAAI,GAAGmB,IAAI,EAAE;IACnCE,MAAM,EAAE,QAAQ;IAChBjB,OAAO,EAAEA,OAAO,CAAC,KAAK;EACxB,CAAC,CAAC;EACF,OAAOM,aAAa,CAACC,GAAG,CAAC;AAC3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}